(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,n){e.exports=n(79)},77:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"getTotalAudioTime",function(){return ze}),n.d(a,"updateCurrentAudioTime",function(){return Ke}),n.d(a,"handleSeek",function(){return Be});var r={};n.r(r),n.d(r,"handlePlay",function(){return Qe}),n.d(r,"handlePause",function(){return We}),n.d(r,"playAudio",function(){return Xe}),n.d(r,"pauseAudio",function(){return Je});var o={};n.r(o),n.d(o,"handleVolume",function(){return Ze}),n.d(o,"handleMute",function(){return $e}),n.d(o,"handleUnmute",function(){return et}),n.d(o,"updateVolume",function(){return tt});var i={};n.r(i),n.d(i,"toggleShuffle",function(){return nt}),n.d(i,"toggleLoop",function(){return at});var s=n(0),l=n.n(s),u=n(33),c=n.n(u),d=n(12),m=n(34),h=n.n(m),p=n(35),f=n(3),g=n(15),E=n.n(g),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return E.a.get("https://zing-lite-rails-api.herokuapp.com/api/songs/?off_set=".concat(e))}(e).then(function(e){return t(function(e){return{type:"RECEIVE_SONGS",payload:e}}(e))})}},v=function(e){return{type:"RECEIVE_USER_PLAYLIST",payload:e}},y=function(e){return function(t){return function(e){return E.a.request({url:"https://zing-lite-rails-api.herokuapp.com/api/playlists/?user_id=".concat(e),method:"get",headers:{"X-CSRF-Token":sessionStorage.getItem("CSRF-TOKEN")},withCredentials:!0})}(e).then(function(e){return t(function(e){return{type:"RECEIVE_USER_PLAYLISTS",payload:e}}(e))})}},S=function(e){return function(t){return function(e){return E.a.request({url:"https://zing-lite-rails-api.herokuapp.com/api/playlists",method:"post",headers:{"X-CSRF-Token":sessionStorage.getItem("CSRF-TOKEN")},data:e,withCredentials:!0})}(e).then(function(e){return t(v(e))})}},O=function(e,t){return function(n){return function(e,t){return E.a.request({url:"https://zing-lite-rails-api.herokuapp.com/api/playlists/".concat(e),method:"patch",headers:{"X-CSRF-Token":sessionStorage.getItem("CSRF-TOKEN")},data:t,withCredentials:!0})}(e,t).then(function(e){return n(v(e))})}},I=function(e){return function(t){return function(e){return E.a.request({url:"https://zing-lite-rails-api.herokuapp.com/api/searches/?query=".concat(e),method:"get"})}(e).then(function(e){return t(function(e){return{type:"RECEIVE_QUERY_DATA",payload:e}}(e))})}},j={2:{id:2,title:"Ha Trang",url:"https://www.dropbox.com/s/ezijh6nzgutwah9/HaTrang.mp3?dl=1",artistId:7,albumId:12}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_SONGS":case"RECEIVE_USER_PLAYLISTS":case"RECEIVE_QUERY_DATA":return Object(f.a)({},e,t.payload.data.songs);default:return e}},R={7:{id:7,name:"Quang Dung",avatarUrl:"https://www.dropbox.com/s/vcb2rfo9ohzzd62/QuangDung.jpg?dl=1"}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_SONGS":case"RECEIVE_USER_PLAYLISTS":case"RECEIVE_QUERY_DATA":return Object(f.a)({},e,t.payload.data.artists);default:return e}},N={12:{id:12,name:"Goi Giac Mo Xua",coverImageUrl:"https://www.dropbox.com/s/8qz1syuymksj5kt/GoiGiacMoXua.jpg?dl=1"}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_SONGS":case"RECEIVE_USER_PLAYLISTS":case"RECEIVE_QUERY_DATA":return Object(f.a)({},e,t.payload.data.albums);default:return e}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_USER_PLAYLISTS":return Object(f.a)({},e,t.payload.data.playlists);case"RECEIVE_USER_PLAYLIST":return Object(f.a)({},e,t.payload.data);case"REMOVE_USER_PLAYLIST":var n=Object(f.a)({},e);return delete n[t.playlistId],n;default:return e}},w={songIds:[]},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_QUERY_DATA":return Object(f.a)({},e,{songIds:t.payload.data.searchResults.songIds});case"CLEAR_SEARCH_RESULTS":return w;default:return e}},L=Object(d.c)({songs:_,artists:C,albums:P,userPlaylists:k,searchResults:A}),T=n(17),U=function(e){return{type:"USER_CLICK_PLAY",songId:e}},V=n(40),F=function(e,t,n){var a=Object(T.a)(e);return e.includes(t)||(a=[].concat(Object(T.a)(e),[t])),a.length===n.length&&(a=[]),a},x=function(e){return{type:"RECEIVE_CURRENT_USER",currentUser:e}},D=function(e){return{type:"RECEIVE_SESSION_ERRORS",errors:e}},M=function(e){var t={userId:e.data.id,username:e.data.username};return sessionStorage.setItem("CSRF-TOKEN",e.data.csrfToken),sessionStorage.setItem("username",t.username),sessionStorage.setItem("userId",t.userId),t},G=function(e){return function(t){return(n=e,E.a.request({url:"https://zing-lite-rails-api.herokuapp.com/api/session",method:"post",headers:{"X-CSRF-Token":sessionStorage.getItem("CSRF-TOKEN")},data:n,withCredentials:!0})).then(function(e){return t(x(M(e)))}).catch(function(e){return t(D(e.response.data))});var n}},Y=function(e){return function(t){return(n=e,E.a.request({url:"https://zing-lite-rails-api.herokuapp.com/api/users",method:"post",headers:{"X-CSRF-Token":sessionStorage.getItem("CSRF-TOKEN")},data:n,withCredentials:!0})).then(function(e){return t(x(M(e)))}).catch(function(e){return t(D(e.response.data))});var n}},q={playingSongIndex:0,songIds:[2],prevSongIndex:0,playedSongIndices:[],currentPlaylist:0},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORWARD":return function(e){var t=e.songIds,n=e.playingSongIndex,a=e.playedSongIndices,r=n+1;r>t.length-1&&(r=0);var o=F(a,n,t);return Object(f.a)({},e,{playingSongIndex:r,prevSongIndex:n,playedSongIndices:o})}(e);case"BACKWARD":return function(e){var t=e.songIds,n=e.playingSongIndex,a=e.playedSongIndices,r=e.prevSongIndex,o=r-1;o<0&&(o=t.length-1);var i=F(a,n,t);return Object(f.a)({},e,{playingSongIndex:r,prevSongIndex:o,playedSongIndices:i})}(e);case"SHUFFLE":return function(e){var t,n=e.songIds,a=e.playedSongIndices,r=e.playingSongIndex,o=[].concat(Object(T.a)(a),[r]),i=n.map(function(e,t){return t}).filter(function(e){return!o.includes(e)});t=0===i.length?Math.floor(Math.random()*n.length):1===i.length?Object(V.a)(i,1)[0]:i[Math.floor(Math.random()*i.length)];var s=F(a,r,n);return Object(f.a)({},e,{playingSongIndex:t,prevSongIndex:r,playedSongIndices:s})}(e);case"USER_CLICK_PLAY":var n=e.songIds,a=e.playingSongIndex,r=n.slice();return r=r.filter(function(e){return e!==t.songId}),r=[].concat(Object(T.a)(r.slice(0,a+1)),[t.songId],Object(T.a)(r.slice(a+2,r.length))),Object(f.a)({},e,{songIds:r});case"CHANGE_SONG":return Object(f.a)({},e,{playingSongIndex:e.songIds.indexOf(t.songId)});case"REMOVE_SONG":return function(e,t){var n=e.songIds,a=e.playingSongIndex,r=e.playedSongIndices;if(1===n.length)return e;var o,i=n.indexOf(t.songId),s=n.filter(function(e){return e!==t.songId}),l=r.filter(function(e){return e!==a});return i>a?o=a:i<=a&&(o=a-1)<0&&(o=s.length-1),Object(f.a)({},e,{songIds:s,playedSongIndices:l,playingSongIndex:o})}(e,t);case"START_PLAYLIST":return Object(f.a)({},q,{songIds:t.songIds,currentPlaylist:t.playlistId});case"RECEIVE_USER_PLAYLIST":return Object(f.a)({},e,{currentPlaylist:parseInt(Object.keys(t.payload.data)[0],10)});case"RECEIVE_USER_LOGOUT":return q;default:return e}},z={id:null,username:null},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_CURRENT_USER":return t.currentUser;case"RECEIVE_USER_LOGOUT":return z;default:return e}},B=Object(d.c)({audioPlayer:H,user:K}),Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_SESSION_ERRORS":return t.errors;case"CLEAR_SESSION_ERRORS":case"RECEIVE_CURRENT_USER":return[];default:return e}},W=Object(d.c)({session:Q}),X={rootPageLoading:!0},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;switch((arguments.length>1?arguments[1]:void 0).type){case"RECEIVE_SONGS":return Object(f.a)({},e,{rootPageLoading:!1});default:return e}},Z=Object(d.c)({loading:J}),$=Object(d.c)({entities:L,session:B,errors:W,ui:Z}),ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(d.d)($,e,Object(d.a)(p.a,h.a))},te=n(4),ne=n(82),ae=n(70),re=n(83),oe=n(41),ie=n(81),se=function(e){var t=e.session;return Boolean(t.user.userId)},le=function(e){return{loggedIn:se(e)}},ue=Object(re.a)(Object(te.b)(le,null)(function(e){var t=e.component,n=e.path,a=e.loggedIn,r=e.exact;return l.a.createElement(ae.a,{path:n,exact:r,render:function(e){return a?l.a.createElement(ie.a,{to:"/profile"}):l.a.createElement(t,e)}})})),ce=Object(re.a)(Object(te.b)(le,null)(function(e){e.toPath;var t=e.component,n=e.loggedIn,a=Object(oe.a)(e,["toPath","component","loggedIn"]);return l.a.createElement(ae.a,Object.assign({},a,{render:function(e){return n?l.a.createElement(t,e):l.a.createElement(ie.a,{to:"/profile/login"})}}))})),de=n(5),me=n(6),he=n(8),pe=n(7),fe=n(9),ge=n(38),Ee=n.n(ge),be=function(e){return e.loading?l.a.createElement("div",{className:"load-icon"}):null},ve=function(e){function t(){var e;return Object(de.a)(this,t),(e=Object(he.a)(this,Object(pe.a)(t).call(this))).state={hasFetchedPlaylist:!1},e}return Object(fe.a)(t,e),Object(me.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchSomeSongs,n=e.fetchUserPlaylists,a=e.userId,r=this.state.hasFetchedPlaylist;t(0),a&&!r&&(n(a),this.setState({hasFetchedPlaylist:!0}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.fetchUserPlaylists,n=e.userId,a=this.state.hasFetchedPlaylist;n&&!a&&(t(n),this.setState({hasFetchedPlaylist:!0}))}},{key:"render",value:function(){var e=this.props.loading;return e?l.a.createElement(be,{loading:e}):l.a.createElement(Ee.a,{to:"/home"})}}]),t}(l.a.Component);ve.defaultProps={userId:null};var ye=ve,Se=Object(te.b)(function(e){var t=e.session,n=e.ui;return{userId:t.user.userId,loading:n.loading.rootPageLoading}},function(e){return{fetchSomeSongs:function(t){return e(b(t))},fetchUserPlaylists:function(t){return e(y(t))}}})(ye),Oe=n(2),Ie=n(80),je={textDecoration:"underline",backgroundColor:"rgba(192, 108, 132, 1)"},_e=function(e){function t(){var e;return Object(de.a)(this,t),(e=Object(he.a)(this,Object(pe.a)(t).call(this))).handleLogout=e.handleLogout.bind(Object(Oe.a)(Object(Oe.a)(e))),e}return Object(fe.a)(t,e),Object(me.a)(t,[{key:"handleLogout",value:function(){(0,this.props.logout)(),window.location.hash="/home"}},{key:"render",value:function(){var e=this.props.isLoggedIn;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{to:"/home",className:"Nav-Home",activeStyle:je},"Home"),l.a.createElement(Ie.a,{to:"/playlist/",className:"Nav-Playlist",activeStyle:je},"Playlist"),l.a.createElement(Ie.a,{to:"/about",className:"Nav-About",activeStyle:je},"About"),l.a.createElement(Ie.a,{to:"/search",className:"Nav-Search",activeStyle:je},"Search"),l.a.createElement(Ie.a,{to:"/profile",className:"Nav-Profile",activeStyle:je},"Profile"),l.a.createElement("button",{className:"Nav-Logout ".concat(!e&&"Nav-Logout-loggedOut"),type:"button",onClick:this.handleLogout},"Logout"))}}]),t}(l.a.Component),Re=Object(re.a)(Object(te.b)(function(e){var t=e.session;return{isLoggedIn:Boolean(t.user.userId)}},function(e){return{logout:function(){return e(function(e){sessionStorage.removeItem("CSRF-TOKEN"),sessionStorage.removeItem("username"),sessionStorage.removeItem("userId"),e({type:"RECEIVE_USER_LOGOUT"})})}}})(_e)),Ce=function(e,t,n){if(!e)return{};var a=t[e.artistId],r=n[e.albumId];return{id:e.id,title:e.title,url:e.url,artist:a.name,artistAvatar:a.avatarUrl,album:r.name,coverImage:r.coverImageUrl}},Ne=function(e){var t=e.entities,n=t.songs,a=t.artists,r=t.albums;return Object.values(n).map(function(e){return Ce(e,a,r)})},Pe=function(e){var t=e.entities,n=e.session.audioPlayer,a=t.songs,r=t.artists,o=t.albums;return n.songIds.map(function(e){return Ce(a[e],r,o)})},ke=function(e){var t=e.session.audioPlayer;return t.songIds[t.playingSongIndex]},we=function(e){var t=e.title,n=e.artist,a=e.album;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,t),l.a.createElement("h5",null,"".concat(n," - ").concat(a)))},Ae=n(39),Le=function(e){function t(e){var n;return Object(de.a)(this,t),(n=Object(he.a)(this,Object(pe.a)(t).call(this,e))).state={query:""},n.handleChange=n.handleChange.bind(Object(Oe.a)(Object(Oe.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(Oe.a)(Object(Oe.a)(n))),n.debounceSearch=Object(Ae.debounce)(function(t){return e.fetchQueryData(t)},500),n}return Object(fe.a)(t,e),Object(me.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.debounceSearch.flush(),this.setState({query:""})}},{key:"handleChange",value:function(e){this.setState({query:e.target.value});var t=this.props.clearSearchResults,n=e.target.value;n&&""!==n?this.debounceSearch(n):(this.debounceSearch.clear(),t())}},{key:"render",value:function(){var e=this.state.query;return l.a.createElement("form",{className:"Input-Form",onSubmit:this.handleSubmit},l.a.createElement("input",{className:"Input-Form__Input",type:"text",placeholder:"Search for songs here...",value:e,onChange:this.handleChange}),l.a.createElement("div",{className:"Input-Form__Buttons"},l.a.createElement("button",{type:"button",onClick:this.handleSubmit},l.a.createElement("h6",null,"Search"))))}}]),t}(l.a.Component),Te=Object(te.b)(null,function(e){return{fetchQueryData:function(t){return e(I(t))},clearSearchResults:function(){return e({type:"CLEAR_SEARCH_RESULTS"})}}})(Le),Ue=function(e){function t(){var e;return Object(de.a)(this,t),(e=Object(he.a)(this,Object(pe.a)(t).call(this))).handlePlay=e.handlePlay.bind(Object(Oe.a)(Object(Oe.a)(e))),e}return Object(fe.a)(t,e),Object(me.a)(t,[{key:"handlePlay",value:function(e){var t=this.props,n=t.userClickPlay,a=t.forward;return function(){n(e),a()}}},{key:"render",value:function(){var e=this,t=this.props.songs;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Te,null),l.a.createElement("ul",{className:"Col-List"},t.map(function(t){return l.a.createElement("li",{className:"Col-List__Item",key:t.id,role:"presentation",onClick:e.handlePlay(t.id)},l.a.createElement(we,t))})))}}]),t}(l.a.Component),Ve=Object(te.b)(function(e){var t=e.entities,n=t.songs,a=t.artists,r=t.albums;return{songs:t.searchResults.songIds.map(function(e){return Ce(n[e],a,r)})}},function(e){return{forward:function(){return e({type:"FORWARD"})},userClickPlay:function(t){return e(U(t))}}})(Ue),Fe=function(e){function t(){var e;return Object(de.a)(this,t),(e=Object(he.a)(this,Object(pe.a)(t).call(this))).handlePlay=e.handlePlay.bind(Object(Oe.a)(Object(Oe.a)(e))),e}return Object(fe.a)(t,e),Object(me.a)(t,[{key:"handlePlay",value:function(){var e=this.props,t=e.id,n=e.userClickPlay,a=e.forward;n(t),a()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.artist,a=e.coverImage;return l.a.createElement("div",{className:"image-wrapper"},l.a.createElement("figure",null,l.a.createElement("img",{src:a,alt:t}),l.a.createElement("button",{type:"button",onClick:this.handlePlay},l.a.createElement("i",{className:"far fa-play-circle fade"}))),l.a.createElement("h5",null,t),l.a.createElement("h5",{className:"image-wrapper__artist"},n))}}]),t}(l.a.Component),xe=function(e){function t(){var e;return Object(de.a)(this,t),(e=Object(he.a)(this,Object(pe.a)(t).call(this))).state={offSet:20},e.handleScroll=e.handleScroll.bind(Object(Oe.a)(Object(Oe.a)(e))),e}return Object(fe.a)(t,e),Object(me.a)(t,[{key:"handleScroll",value:function(e){var t=this.state.offSet;if(!(t>35)){var n=this.props.fetchSomeSongs,a=e.target;a.scrollHeight-a.scrollTop<=a.clientHeight+1&&(n(t),this.setState(function(e){return{offSet:e.offSet+20}}))}}},{key:"render",value:function(){var e=this.props,t=e.songs,n=e.forward,a=e.userClickPlay;return l.a.createElement("ul",{className:"Row-List",onScroll:this.handleScroll},t.map(function(e){return l.a.createElement("li",{className:"Row-List__Item",key:e.id},l.a.createElement(Fe,Object.assign({},e,{userClickPlay:a,forward:n})))}))}}]),t}(l.a.Component),De=Object(te.b)(function(e){return{songs:Ne(e)}},function(e){return{fetchSomeSongs:function(t){return e(b(t))},forward:function(){return e({type:"FORWARD"})},userClickPlay:function(t){return e(U(t))}}})(xe),Me=function(e){var t=e.name,n=e.coverImageUrl,a=e.handlePlay,r=e.songIds,o=e.id;return l.a.createElement("div",{className:"image-wrapper"},l.a.createElement("figure",null,l.a.createElement("img",{className:"profile__playlist__image",src:n,alt:t}),l.a.createElement("button",{type:"button",onClick:a(r,o)},l.a.createElement("i",{className:"far fa-play-circle"}))),l.a.createElement("h5",{className:"profile__playlist__name"},t))},Ge=function(e){function t(){var e;return Object(de.a)(this,t),(e=Object(he.a)(this,Object(pe.a)(t).call(this))).handlePlay=e.handlePlay.bind(Object(Oe.a)(Object(Oe.a)(e))),e}return Object(fe.a)(t,e),Object(me.a)(t,[{key:"handlePlay",value:function(e,t){var n=this.props.play;return function(){n(e,t),window.location.hash="/playlist"}}},{key:"render",value:function(){var e=this,t=this.props,n=t.user,a=t.userPlaylists;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{className:"profile__playlist__header"},l.a.createElement("span",null,"Hi, ".concat(n.username,"! Below are your personal playlists"))),l.a.createElement("ul",{className:"Row-List profile__playlist"},a.map(function(t){return l.a.createElement("li",{className:"Row-List__Item",key:t.id},l.a.createElement(Me,Object.assign({},t,{userId:n.userId,handlePlay:e.handlePlay})))})))}}]),t}(l.a.Component),Ye=Object(te.b)(function(e){var t=e.entities,n=e.session;return{userPlaylists:Object.values(t.userPlaylists).reverse(),user:n.user}},function(e){return{play:function(t,n){return e(function(e,t){return{type:"START_PLAYLIST",songIds:e,playlistId:t}}(t,n))}}})(Ge),qe=function(e){var t=e.session.audioPlayer,n=t.songIds,a=t.playedSongIndices;return n.length-1===a.length},He=function(e){var t=Math.floor(e/60),n=Math.floor(e-60*t);return n<10&&(n="0".concat(n)),"".concat(t,":").concat(n)};function ze(){var e=this.audioRef.current.duration;this.setState({totalAudioTime:He(e)})}function Ke(){var e,t=this.audioRef.current,n=t.duration,a=t.currentTime;e=n?a/n*100:0,this.setState({currentAudioTime:He(a),seekValue:e})}function Be(e){var t=this.audioRef.current.duration*(e.target.value/100);this.audioRef.current.currentTime=t}function Qe(){this.setState({isPlaying:!0})}function We(){this.setState({isPlaying:!1})}function Xe(){this.audioRef.current.play()}function Je(){this.audioRef.current.pause()}function Ze(e){var t=e.target.value/100;this.audioRef.current.volume=t}function $e(){var e=this.audioRef.current.volume;this.setState({preMuteVolume:100*e}),this.audioRef.current.volume=0}function et(e){var t=this;return function(){t.audioRef.current.volume=e/100}}function tt(){var e=this.audioRef.current.volume;this.setState({volume:100*e})}function nt(e){var t=this;return function(){t.setState({isOnShuffle:!e})}}function at(e){var t=this;return function(){t.setState({isOnLoop:!e})}}var rt=Object(f.a)({},a,r,o,i),ot=function(e){var t=e.audioRef,n=e.url,a=e.isEndOfLoop,r=e.isOnLoop,o=e.isOnShuffle,i=e.forward,s=e.shuffle,u=e.getTotalAudioTime,c=e.updateCurrentAudioTime,d=e.updateVolume,m=e.handlePause,h=e.handlePlay,p=e.playAudio;return l.a.createElement("audio",{src:n,ref:t,onLoadedMetadata:u,onDurationChange:p,onTimeUpdate:c,onVolumeChange:d,onPause:m,onPlay:h,onEnded:function(){a&&!r||(o?s():i(),window.setTimeout(function(){p()},0))}})},it=function(e){var t=e.album,n=e.coverImage;return l.a.createElement("figure",{className:"SpinningDisc"},l.a.createElement("img",{src:n,alt:t}))},st=function(e){var t=e.title,n=e.artist,a=e.artistAvatar;return l.a.createElement("div",{className:"Marquee"},l.a.createElement("p",null,l.a.createElement("img",{src:a,alt:n}),l.a.createElement("span",null,"".concat(t," - ").concat(n))))},lt=function(e){var t=e.isPlaying,n=e.playAudio,a=e.pauseAudio;return t?l.a.createElement("button",{type:"button",onClick:a},l.a.createElement("i",{className:"far fa-pause-circle active"})):l.a.createElement("button",{type:"button",onClick:n},l.a.createElement("i",{className:"far fa-play-circle"}))},ut=function(e){var t=e.forward,n=e.playAudio;return l.a.createElement("button",{type:"button",onClick:function(){t(),window.setTimeout(function(){n()},0)}},l.a.createElement("i",{className:"fas fa-step-forward"}))},ct=function(e){var t=e.isOnShuffle,n=e.toggleShuffle;return l.a.createElement("button",{type:"button",onClick:n(t)},l.a.createElement("i",{className:"fas fa-random ".concat(t&&"active")}))},dt=function(e){var t=e.backward,n=e.playAudio;return l.a.createElement("button",{type:"button",onClick:function(){t(),window.setTimeout(function(){n()},0)}},l.a.createElement("i",{className:"fas fa-step-backward"}))},mt=function(e){var t=e.seekValue,n=e.handleSeek,a=e.currentAudioTime,r=e.totalAudioTime;return l.a.createElement("div",{className:"SeekSlider"},l.a.createElement("input",{type:"range",min:"0",max:"100",step:"1",value:t,onChange:n}),l.a.createElement("p",null,"".concat(a,"/").concat(r)))},ht=function(e){var t,n=e.volume,a=e.preMuteVolume,r=e.handleMute,o=e.handleUnmute;e.handleVolume;return t=0===n?l.a.createElement("button",{type:"button",className:"volume-button",onClick:o(a)},l.a.createElement("i",{className:"fas fa-volume-mute"})):l.a.createElement("button",{type:"button",className:"volume-button",onClick:r},l.a.createElement("i",{className:"fas fa-volume-up active"})),l.a.createElement(l.a.Fragment,null,t)},pt=function(e){var t=e.isOnLoop,n=e.toggleLoop;return l.a.createElement("button",{type:"button",onClick:n(t)},l.a.createElement("i",{className:"fas fa-redo-alt ".concat(t&&"active")}))},ft=function(e){function t(){var e;return Object(de.a)(this,t),(e=Object(he.a)(this,Object(pe.a)(t).call(this))).state={isPlaying:!1,isOnLoop:!1,isOnShuffle:!1,seekValue:0,totalAudioTime:"0:00",currentAudioTime:"0:00",volume:50,preMuteVolume:50},e.audioRef=l.a.createRef(),e.getTotalAudioTime=rt.getTotalAudioTime.bind(Object(Oe.a)(Object(Oe.a)(e))),e.updateCurrentAudioTime=rt.updateCurrentAudioTime.bind(Object(Oe.a)(Object(Oe.a)(e))),e.handleSeek=rt.handleSeek.bind(Object(Oe.a)(Object(Oe.a)(e))),e.handlePlay=rt.handlePlay.bind(Object(Oe.a)(Object(Oe.a)(e))),e.handlePause=rt.handlePause.bind(Object(Oe.a)(Object(Oe.a)(e))),e.playAudio=rt.playAudio.bind(Object(Oe.a)(Object(Oe.a)(e))),e.pauseAudio=rt.pauseAudio.bind(Object(Oe.a)(Object(Oe.a)(e))),e.handleVolume=rt.handleVolume.bind(Object(Oe.a)(Object(Oe.a)(e))),e.handleMute=rt.handleMute.bind(Object(Oe.a)(Object(Oe.a)(e))),e.handleUnmute=rt.handleUnmute.bind(Object(Oe.a)(Object(Oe.a)(e))),e.updateVolume=rt.updateVolume.bind(Object(Oe.a)(Object(Oe.a)(e))),e.toggleShuffle=rt.toggleShuffle.bind(Object(Oe.a)(Object(Oe.a)(e))),e.toggleLoop=rt.toggleLoop.bind(Object(Oe.a)(Object(Oe.a)(e))),e}return Object(fe.a)(t,e),Object(me.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.url,a=e.artist,r=e.artistAvatar,o=e.album,i=e.coverImage,s=e.isEndOfLoop,u=e.forward,c=e.backward,d=e.shuffle,m=this.state,h=m.isPlaying,p=m.isOnLoop,f=m.isOnShuffle,g=m.volume,E=m.preMuteVolume,b=m.seekValue,v=m.currentAudioTime,y=m.totalAudioTime;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ot,{audioRef:this.audioRef,url:n,forward:u,shuffle:d,isEndOfLoop:s,isOnLoop:p,isOnShuffle:f,getTotalAudioTime:this.getTotalAudioTime,updateCurrentAudioTime:this.updateCurrentAudioTime,updateVolume:this.updateVolume,handlePause:this.handlePause,handlePlay:this.handlePlay,playAudio:this.playAudio}),l.a.createElement("div",{className:"AudioPlayerContainer"},l.a.createElement(it,{album:o,coverImage:i}),l.a.createElement(st,{title:t,artist:a,artistAvatar:r}),l.a.createElement("div",{className:"Controls1"},l.a.createElement(dt,{backward:c,playAudio:this.playAudio}),l.a.createElement(lt,{isPlaying:h,playAudio:this.playAudio,pauseAudio:this.pauseAudio}),l.a.createElement(ut,{forward:u,playAudio:this.playAudio})),l.a.createElement("div",{className:"Controls2"},l.a.createElement(ct,{isOnShuffle:f,toggleShuffle:this.toggleShuffle}),l.a.createElement(pt,{isEndOfLoop:s,isOnLoop:p,toggleLoop:this.toggleLoop}),l.a.createElement(ht,{volume:g,preMuteVolume:E,handleMute:this.handleMute,handleUnmute:this.handleUnmute,handleVolume:this.handleVolume})),l.a.createElement(mt,{seekValue:b,currentAudioTime:v,totalAudioTime:y,handleSeek:this.handleSeek})))}}]),t}(l.a.Component),gt=Object(te.b)(function(e){return Object(f.a)({},function(e){var t=e.entities,n=e.session,a=t.songs,r=t.artists,o=t.albums,i=n.audioPlayer,s=a[i.songIds[i.playingSongIndex]];return Ce(s,r,o)}(e),{isEndOfLoop:qe(e)})},function(e){return{forward:function(){return e({type:"FORWARD"})},backward:function(){return e({type:"BACKWARD"})},shuffle:function(){return e({type:"SHUFFLE"})}}})(ft),Et=function(){return l.a.createElement("span",{className:"playlist-item__sound-wave"},l.a.createElement("span",{className:"sound-wave__wave"}),l.a.createElement("span",{className:"sound-wave__wave"}),l.a.createElement("span",{className:"sound-wave__wave"}),l.a.createElement("span",{className:"sound-wave__wave"}),l.a.createElement("span",{className:"sound-wave__wave"}))},bt=function(e){var t=e.id,n=e.title,a=e.artist,r=e.album,o=e.isPlaying,i=e.handleRemoveSong;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"playlist-item__inner-wrapper"},o?l.a.createElement(Et,null):null,l.a.createElement("span",null,l.a.createElement("h4",{className:"playlist-item__title"},n)),l.a.createElement("button",{className:"playlist-item__X",type:"button",onClick:i(t)},l.a.createElement("h6",null,"remove"))),l.a.createElement("h5",null,"".concat(a," - ").concat(r)))},vt=function(e){function t(e){var n;return Object(de.a)(this,t),(n=Object(he.a)(this,Object(pe.a)(t).call(this,e))).state={newName:"".concat(e.playlistName||"")},n.handleNew=n.handleNew.bind(Object(Oe.a)(Object(Oe.a)(n))),n.handleEdit=n.handleEdit.bind(Object(Oe.a)(Object(Oe.a)(n))),n.handleChange=n.handleChange.bind(Object(Oe.a)(Object(Oe.a)(n))),n}return Object(fe.a)(t,e),Object(me.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.playlistName;this.setState({newName:"".concat(t||"")})}},{key:"makePlaylistData",value:function(){var e=this.state.newName,t=this.props;return{playlist:{name:e,user_id:t.userId,song_ids:t.songIds}}}},{key:"handleNew",value:function(){(0,this.props.createPlaylist)(this.makePlaylistData())}},{key:"handleEdit",value:function(){var e=this.props,t=e.playlistId;(0,e.editPlaylist)(t,this.makePlaylistData())}},{key:"handleChange",value:function(e){this.setState({newName:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.playlistName,n=e.userId,a=this.state.newName;return n?l.a.createElement("form",{className:"Input-Form",onSubmit:function(e){return e.preventDefault()}},l.a.createElement("input",{className:"Input-Form__Input",type:"text",placeholder:"Name this playlist...",value:a,onChange:this.handleChange}),l.a.createElement("div",{className:"Input-Form__Buttons"},t?l.a.createElement("button",{type:"button",onClick:this.handleEdit},l.a.createElement("h6",null,"Save/Edit")):null,l.a.createElement("button",{type:"button",onClick:this.handleNew},l.a.createElement("h6",null,"Create New")))):null}}]),t}(l.a.Component);vt.defaultProps={userId:null,playlistId:void 0,playlistName:void 0};var yt=vt,St=Object(te.b)(function(e){var t=e.session.audioPlayer.currentPlaylist,n=function(e,t){var n,a=e.entities;try{n=a.userPlaylists[t].name}catch(r){n=void 0}return n}(e,t);return{userId:e.session.user.userId,playlistId:t,playlistName:n}},function(e){return{createPlaylist:function(t){return e(S(t))},editPlaylist:function(t,n){return e(O(t,n))}}})(yt),Ot=function(e){function t(e){var n;return Object(de.a)(this,t),(n=Object(he.a)(this,Object(pe.a)(t).call(this,e))).handleChangeSong=n.handleChangeSong.bind(Object(Oe.a)(Object(Oe.a)(n))),n.handleRemoveSong=n.handleRemoveSong.bind(Object(Oe.a)(Object(Oe.a)(n))),n}return Object(fe.a)(t,e),Object(me.a)(t,[{key:"handleChangeSong",value:function(e){var t=this.props.changeSong;return function(n){n.stopPropagation(),t(e)}}},{key:"handleRemoveSong",value:function(e){var t=this.props.removeSong;return function(n){n.stopPropagation(),t(e)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.songs,a=t.playingSongId;return l.a.createElement(l.a.Fragment,null,l.a.createElement(St,{songIds:n.map(function(e){return e.id})}),l.a.createElement("ul",{className:"Col-List"},n.map(function(t){return l.a.createElement("li",{className:"\n              Col-List__Item playlist-item \n              ".concat(t.id===a?"playlist-item--playing":"","\n            "),key:t.id,role:"presentation",onClick:e.handleChangeSong(t.id)},l.a.createElement(bt,Object.assign({},t,{isPlaying:t.id===a,handleRemoveSong:e.handleRemoveSong})))})))}}]),t}(l.a.Component),It=Object(te.b)(function(e){return{songs:Pe(e),playingSongId:ke(e)}},function(e){return{changeSong:function(t){return e(function(e){return{type:"CHANGE_SONG",songId:e}}(t))},removeSong:function(t){return e(function(e){return{type:"REMOVE_SONG",songId:e}}(t))}}})(Ot),jt=n(20),_t=n(74),Rt=function(e){function t(){var e;return Object(de.a)(this,t),(e=Object(he.a)(this,Object(pe.a)(t).call(this))).state={username:"",password:""},e.handleSubmit=e.handleSubmit.bind(Object(Oe.a)(Object(Oe.a)(e))),e}return Object(fe.a)(t,e),Object(me.a)(t,[{key:"componentWillUnmount",value:function(){var e=this.props,t=e.clearSessionErrors;0!==e.errors.length&&t()}},{key:"update",value:function(e){var t=this;return function(n){t.setState(Object(jt.a)({},e,n.target.value))}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props.processForm,n=this.state;t({user:{username:n.username,password:n.password}}),this.setState({username:"",password:""})}},{key:"render",value:function(){var e=this.props,t=e.formType,n=e.errors,a=this.state,r=a.username,o=a.password;return l.a.createElement("form",{className:"session-form",onSubmit:this.handleSubmit},l.a.createElement("input",{className:"session-form__input",type:"text",placeholder:"Username",value:r,onChange:this.update("username")}),l.a.createElement("br",null),l.a.createElement("input",{className:"session-form__input",type:"password",placeholder:"Password",value:o,onChange:this.update("password")}),l.a.createElement("ul",{className:"session-form__errors"},n.map(function(e,t){return l.a.createElement("li",{key:t},e)})),l.a.createElement("br",null),l.a.createElement("button",{className:"session-form__button",type:"submit"},t),l.a.createElement("button",{className:"session-form__button",type:"submit"},"DEMO"),"LOG IN"===t?l.a.createElement("p",{className:"session-form__text"},"Don't have an account? ",l.a.createElement(_t.a,{className:"session-form__link",to:"/profile/signup"},"Signup")):l.a.createElement("p",null,"Already have an account? ",l.a.createElement(_t.a,{className:"session-form__link",to:"/profile/login"},"Login")))}}]),t}(l.a.Component),Ct=Object(te.b)(function(e){return{errors:e.errors.session,formType:"LOG IN"}},function(e){return{processForm:function(t){return e(G(t))},clearSessionErrors:function(){return e({type:"CLEAR_SESSION_ERRORS"})}}})(Rt),Nt=Object(te.b)(function(e){return{errors:e.errors.session,formType:"SIGN UP"}},function(e){return{processForm:function(t){return e(Y(t))},clearSessionErrors:function(){return e({type:"CLEAR_SESSION_ERRORS"})}}})(Rt),Pt=Object(re.a)(Object(te.b)(function(e){var t=e.session;return{isLoggedIn:Boolean(t.user.userId)}},null)(function(e){var t=e.isLoggedIn;return l.a.createElement("div",{className:"Site ".concat(t&&"Site-LoggedIn")},l.a.createElement(Re,null),l.a.createElement("div",{className:"Main"},l.a.createElement(ae.a,{path:"/home",component:De}),l.a.createElement(ae.a,{exact:!0,path:"/playlist",component:It}),l.a.createElement(ce,{exact:!0,path:"/playlist/:playlistId",component:It}),l.a.createElement(ae.a,{path:"/search",component:Ve}),l.a.createElement(ce,{exact:!0,path:"/profile",component:Ye}),l.a.createElement(ue,{path:"/profile/login",component:Ct}),l.a.createElement(ue,{path:"/profile/signup",component:Nt})),l.a.createElement("aside",{className:"Aside"},l.a.createElement(ae.a,{path:"/",component:Se}),l.a.createElement(ae.a,{path:"/",component:gt})))})),kt=function(e){function t(){var e;return Object(de.a)(this,t),(e=Object(he.a)(this,Object(pe.a)(t).call(this))).state={hasError:!1},e}return Object(fe.a)(t,e),Object(me.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?l.a.createElement(ie.a,{to:"/home"}):this.props.children}}]),t}(l.a.Component),wt=function(e){var t=e.store;return l.a.createElement(te.a,{store:t},l.a.createElement(ne.a,null,l.a.createElement(kt,null,l.a.createElement(Pt,null))))};n(75),n(77);document.addEventListener("DOMContentLoaded",function(){var e,t=document.getElementById("root");if(sessionStorage.getItem("userId")){var n={session:{user:{userId:parseInt(sessionStorage.getItem("userId"),10),username:sessionStorage.getItem("username")}}};e=ee(n)}else e=ee();c.a.render(l.a.createElement(wt,{store:e}),t)})}},[[42,2,1]]]);
//# sourceMappingURL=main.43288c00.chunk.js.map